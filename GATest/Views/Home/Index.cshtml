@{
    Layout = null;
    var title = "Google Analytics Test Page";
    var endDate = DateTime.Now.Date;
    var startDate = endDate.AddMonths(-1);
}

<!DOCTYPE html>

<html ng-app="gaApp">
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@title</title>
    
    <link href="~/Content/styles/stylesheets/screen.css" rel="stylesheet" />
    <link href="~/Content/themes/base/minified/jquery-ui.min.css" rel="stylesheet" />
</head>
    <body>
        <div class="container">
            
            <h1>@title</h1>

            <div id="analyticsController" ng-controller="Analytics">
                
                <div id="errors">
                    <p class="error" ng-show="error">{{ error }}</p>
                </div>
                
                <div id="console">
                    <fieldset>
                        <legend>Console</legend>
                    
                        <textarea readonly>{{ output }}</textarea>

                    </fieldset>
                </div> 
                <div id="form">
                    <fieldset>
                        <legend>App Auth</legend>
                        <p>
                            <span ng-show="username">Currently logged in as {{ username }}</span>
                            <span ng-show="!username">Not currently logged in with a Google Account.</span>
                        </p>
                        <p>
                            Analytics Accounts:
                            <label class="account" ng-repeat="acct in accounts"><input ng-checked="accountId == acct.id" type="radio" name="account" value="{{ acct.id }}" /> {{ acct.name }}</label>
                        </p>
                        <p>
                            <label>Client ID: </label>
                            <input type="text" ng-model="clientId"/>
                        </p>
                        <p>
                            <label>API Key: </label>
                            <input type="text" ng-model="apiKey"/>
                        </p>
                        <p>
                            <label>Tracking Code: </label>
                            <input type="text" ng-model="trackingCode"/>
                        </p>
                        <p>
                            <label>Start Date: </label>
                            <input class="datepicker" type="text" ng-model="startDate" data-value="@startDate.ToString("d")"/>
                            <label>End Date: </label>
                            <input class="datepicker" type="text" ng-model="endDate" data-value="@endDate.ToString("d")"/>
                        </p>
                        <p>
                            <button id="fetchResults">Fetch Results</button>
                        </p>
                    </fieldset>
                </div>

                <div id="results" ng-show="results && results.rows.length > 0">
                    <div class="table-results">
                        <h3>Results</h3>
                        <table class="data">
                            <thead>
                                <tr>
                                    <th ng-repeat="header in results.columnHeaders">{{ header.name }}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="row in results.rows" ng-init="outerIndex = $index" class="{{ $last ? 'last' : '' }} {{ $even ? 'even' : 'odd' }}">
                                    <td ng-repeat="header in results.columnHeaders" ng-init="innerIndex = $index; row = results.rows[outerIndex][innerIndex]">
                                        <span ng-show="header.name === 'ga:date'">{{ row.formatDate() }}</span>
                                        <span ng-show="header.name !== 'ga:date'">{{ row }}</span>
                                    
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="raw-results">
                        <h3>Raw Results Object</h3>
                        <textarea readonly>{{ results }}</textarea>
                    </div>
                </div>
            </div>
            
        </div>
    
        <script src="~/Scripts/angular.min.js"></script>
        <script src="~/Scripts/jquery-2.1.0.min.js"></script>
        <script src="~/Scripts/jquery-ui-1.10.4.min.js"></script>
        <script src="~/Scripts/app.js"></script>
        <script src="~/Scripts/controllers/Analytics.js"></script>
        
        <script src="https://apis.google.com/js/client.js"></script>
        <script src="~/Scripts/analytics-api.js"></script>
    </body>
</html>
